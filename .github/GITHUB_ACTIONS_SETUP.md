# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions –¥–ª—è OpenVPN Android

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –¥–≤–∞ GitHub Actions workflow –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

## üìã Workflows

### 1. `build.yml` - –û—Å–Ω–æ–≤–Ω–∞—è —Å–±–æ—Ä–∫–∞

- **–¢—Ä–∏–≥–≥–µ—Ä—ã:** Push –≤ `master`/`develop`, Pull Request –≤ `master`
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –°–±–æ—Ä–∫–∞ debug –∏ release APK
  - –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
  - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ native –∫–æ–¥–∞ (C++/CMake)

### 2. `release.yml` - –†–µ–ª–∏–∑–Ω–∞—è —Å–±–æ—Ä–∫–∞

- **–¢—Ä–∏–≥–≥–µ—Ä—ã:** –°–æ–∑–¥–∞–Ω–∏–µ Release, —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –°–±–æ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö APK
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Release
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ keystore –¥–ª—è –ø–æ–¥–ø–∏—Å–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Secrets

### –î–ª—è –ø–æ–¥–ø–∏—Å–∏ APK (—Ä–µ–ª–∏–∑—ã)

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (Settings ‚Üí Secrets and variables ‚Üí Actions) –¥–æ–±–∞–≤—å—Ç–µ:

1. `KEYSTORE_BASE64` - Base64 –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π keystore —Ñ–∞–π–ª
2. `KEYSTORE_PASSWORD` - –ü–∞—Ä–æ–ª—å –æ—Ç keystore
3. `KEYSTORE_ALIAS` - –ê–ª–∏–∞—Å –∫–ª—é—á–∞ –≤ keystore
4. `KEYSTORE_ALIAS_PASSWORD` - –ü–∞—Ä–æ–ª—å –æ—Ç –∞–ª–∏–∞—Å–∞

### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å KEYSTORE_BASE64:

```bash
# –ó–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å keystore –≤ base64
base64 -i your_keystore.jks -o keystore_base64.txt

# –ò–ª–∏ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
cat your_keystore.jks | base64 > keystore_base64.txt
```

## üèóÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

### Native –∫–æ–¥

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç C++ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é:

- **CMake** –¥–ª—è —Å–±–æ—Ä–∫–∏ native –±–∏–±–ª–∏–æ—Ç–µ–∫
- **SWIG** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Java –±–∏–Ω–¥–∏–Ω–≥–æ–≤
- **Android NDK** –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø–æ–¥ Android

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **JDK 8** (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Android Gradle Plugin 3.1.2)
- **Android SDK 27** –∏ **Build Tools 27.0.3**
- **SWIG 3.0+** –¥–ª—è OpenVPN3 –±–∏–Ω–¥–∏–Ω–≥–æ–≤
- **CMake** –¥–ª—è native —Å–±–æ—Ä–∫–∏

### –°—É–±–º–æ–¥—É–ª–∏

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Git —Å—É–±–º–æ–¥—É–ª–∏ –¥–ª—è OpenVPN –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞. Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Ö.

## üì¶ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:

1. **debug-apk** - Debug –≤–µ—Ä—Å–∏—è APK
2. **release-apk** - Release –≤–µ—Ä—Å–∏—è APK (–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–∞—è/–Ω–µ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–∞—è)
3. **test-reports** - –û—Ç—á–µ—Ç—ã –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

## üöÄ –ó–∞–ø—É—Å–∫

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫:

- –ü—Ä–∏ push –≤ `master` –∏–ª–∏ `develop`
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Pull Request –≤ `master`
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Release

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ Actions
2. –í—ã–±—Ä–∞—Ç—å "Release Build"
3. –ù–∞–∂–∞—Ç—å "Run workflow"
4. –£–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é

## üîç Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å native —Å–±–æ—Ä–∫–æ–π:

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å—É–±–º–æ–¥—É–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ NDK –∏ CMake
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SWIG —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–ø–∏—Å—å—é:

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å secrets
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ keystore —Ñ–∞–π–ª –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª–∏ –∏ –∞–ª–∏–∞—Å—ã

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:

- –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à Gradle –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –≤ `build.gradle`

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π:

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π Android SDK/NDK –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã workflow.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤:

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤ —Å–µ–∫—Ü–∏—é `on:` –≤ workflow —Ñ–∞–π–ª–∞—Ö.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:

–î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ workflow –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∏–ª–∏ –∑–∞–ø—É—Å–∫–æ–º workflow:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ Actions
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ secrets
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ GitHub Actions
