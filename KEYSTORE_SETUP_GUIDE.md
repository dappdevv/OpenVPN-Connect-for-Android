# üîê –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ APK

## üìã –û–±–∑–æ—Ä

–î–ª—è —Ä–µ–ª–∏–∑–Ω–æ–π —Å–±–æ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö APK –≤ GitHub Actions –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã 4 —Å–µ–∫—Ä–µ—Ç–∞:

- `KEYSTORE_BASE64` - Base64 –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π keystore —Ñ–∞–π–ª
- `KEYSTORE_PASSWORD` - –ü–∞—Ä–æ–ª—å –æ—Ç keystore —Ñ–∞–π–ª–∞
- `KEYSTORE_ALIAS` - –ê–ª–∏–∞—Å –∫–ª—é—á–∞ –≤ keystore
- `KEYSTORE_ALIAS_PASSWORD` - –ü–∞—Ä–æ–ª—å –æ—Ç –∞–ª–∏–∞—Å–∞ –∫–ª—é—á–∞

## üéØ –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã)

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ keystore —Ñ–∞–π–ª–∞

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π keystore —Ñ–∞–π–ª
./scripts/create-keystore.sh
```

### –®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤

```bash
# –°–æ–∑–¥–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ–∫—Ä–µ—Ç—ã
./scripts/generate-secrets.sh
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ GitHub

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `github-secrets.txt`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞
3. –î–æ–±–∞–≤—å—Ç–µ –≤ GitHub: Settings ‚Üí Secrets and variables ‚Üí Actions

---

## üîß –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ keystore —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ –Ω–µ—Ç)

```bash
# –°–æ–∑–¥–∞—Ç—å keystore —Ñ–∞–π–ª
keytool -genkey -v \
    -keystore openvpn-android.jks \
    -alias openvpn-key \
    -keyalg RSA \
    -keysize 2048 \
    -validity 10000 \
    -storepass YOUR_KEYSTORE_PASSWORD \
    -keypass YOUR_KEY_PASSWORD
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- `openvpn-android.jks` - –∏–º—è keystore —Ñ–∞–π–ª–∞
- `openvpn-key` - –∞–ª–∏–∞—Å –∫–ª—é—á–∞
- `YOUR_KEYSTORE_PASSWORD` - –ø–∞—Ä–æ–ª—å keystore
- `YOUR_KEY_PASSWORD` - –ø–∞—Ä–æ–ª—å –∫–ª—é—á–∞

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ base64 –≤–µ—Ä—Å–∏–∏

```bash
# –°–æ–∑–¥–∞—Ç—å base64 –≤–µ—Ä—Å–∏—é keystore
cat openvpn-android.jks | base64 -w 0 > keystore_base64.txt
```

### –®–∞–≥ 3: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π —Å–µ–∫—Ä–µ—Ç–æ–≤

```bash
# 1. KEYSTORE_BASE64
cat keystore_base64.txt

# 2. KEYSTORE_PASSWORD
echo "YOUR_KEYSTORE_PASSWORD"

# 3. KEYSTORE_ALIAS
echo "openvpn-key"

# 4. KEYSTORE_ALIAS_PASSWORD
echo "YOUR_KEY_PASSWORD"
```

---

## üåê –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ GitHub

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** –Ω–∞ GitHub:

   ```
   https://github.com/dappdevv/OpenVPN-Connect-for-Android
   ```

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Settings"
   - –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ "Secrets and variables"
   - –ù–∞–∂–º–∏—Ç–µ "Actions"

3. **–î–æ–±–∞–≤—å—Ç–µ –∫–∞–∂–¥—ã–π —Å–µ–∫—Ä–µ—Ç**:

   **a) KEYSTORE_BASE64**

   - –ù–∞–∂–º–∏—Ç–µ "New repository secret"
   - Name: `KEYSTORE_BASE64`
   - Value: —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `keystore_base64.txt`
   - –ù–∞–∂–º–∏—Ç–µ "Add secret"

   **b) KEYSTORE_PASSWORD**

   - Name: `KEYSTORE_PASSWORD`
   - Value: –ø–∞—Ä–æ–ª—å –æ—Ç keystore —Ñ–∞–π–ª–∞
   - –ù–∞–∂–º–∏—Ç–µ "Add secret"

   **c) KEYSTORE_ALIAS**

   - Name: `KEYSTORE_ALIAS`
   - Value: `openvpn-key` (–∏–ª–∏ –≤–∞—à –∞–ª–∏–∞—Å)
   - –ù–∞–∂–º–∏—Ç–µ "Add secret"

   **d) KEYSTORE_ALIAS_PASSWORD**

   - Name: `KEYSTORE_ALIAS_PASSWORD`
   - Value: –ø–∞—Ä–æ–ª—å –æ—Ç –∞–ª–∏–∞—Å–∞ –∫–ª—é—á–∞
   - –ù–∞–∂–º–∏—Ç–µ "Add secret"

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã**:
   - –£ –≤–∞—Å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 4 —Å–µ–∫—Ä–µ—Ç–∞
   - –ò–º–µ–Ω–∞ –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Ç–æ—á–Ω–æ
   - –ó–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–µ–∑ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–ª–∏–∑–∞:

1. **–°–æ–∑–¥–∞–π—Ç–µ tag**:

   ```bash
   git tag v1.0.0-test
   git push origin v1.0.0-test
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ Release**:

   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ GitHub ‚Üí Releases
   - –ù–∞–∂–º–∏—Ç–µ "Create a new release"
   - –í—ã–±–µ—Ä–∏—Ç–µ tag `v1.0.0-test`
   - –ù–∞–∂–º–∏—Ç–µ "Publish release"

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Actions**:

   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Actions
   - –ù–∞–π–¥–∏—Ç–µ workflow "Release Build"
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏

4. **–°–∫–∞—á–∞–π—Ç–µ APK**:
   - –í –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–º Action –Ω–∞–π–¥–∏—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
   - –°–∫–∞—á–∞–π—Ç–µ `release-apk`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ APK –ø–æ–¥–ø–∏—Å–∞–Ω

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ APK:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å—å APK
jarsigner -verify -verbose -certs your-app.apk

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ —Å Android SDK
apksigner verify --verbose your-app.apk
```

---

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ‚ùå –ù–ï –î–ï–õ–ê–ô–¢–ï:

- –ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ keystore —Ñ–∞–π–ª—ã –≤ Git
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è production
- –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å keystore —Ñ–∞–π–ª–∞–º–∏
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏

### ‚úÖ –î–ï–õ–ê–ô–¢–ï:

- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ keystore —Ñ–∞–π–ª –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è production
- –†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ backup keystore —Ñ–∞–π–ª–∞
- –£–¥–∞–ª—è–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:

```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
rm -f keystore_*.txt github-secrets.txt *.jks *.keystore
```

---

## üîç –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Keystore file not found"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ keystore —Ñ–∞–π–ª—É
ls -la *.jks *.keystore

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π keystore
./scripts/create-keystore.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid keystore format"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç keystore
keytool -list -v -keystore openvpn-android.jks

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ base64 –≤–µ—Ä—Å–∏—é
cat openvpn-android.jks | base64 -w 0 > keystore_base64.txt
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Signing failed"

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—Å–µ—Ö 4 —Å–µ–∫—Ä–µ—Ç–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–ª–∏–∞—Å –∫–ª—é—á–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "Secret not found"

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–º–µ–Ω–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ GitHub Actions
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Android –ø–æ –ø–æ–¥–ø–∏—Å–∏ APK

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**

- [Android App Signing](https://developer.android.com/studio/publish/app-signing)
- [GitHub Actions Secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets)
- [Java Keytool](https://docs.oracle.com/en/java/javase/11/tools/keytool.html)
